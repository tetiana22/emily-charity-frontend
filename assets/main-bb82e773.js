(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();const I="https://emily-charity.onrender.com",P="Bearer sandbox_QbpEJylc3XRJ4iE8qe1axWfIGQ4k_H_bxfs3lkQt",L=async(n,t,e)=>{try{const s=await fetch(`${I}${n}`,{method:t,headers:{"Content-Type":"application/json",Authorization:P},body:e?JSON.stringify(e):void 0});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error(`Error with ${n}:`,s),s}},C=async n=>{try{return await L("/create-paypal-order","POST",{amount:n})}catch(t){throw console.error("Error creating PayPal order:",t),t}},A=(n,t,e,s)=>L("/create-billing-request","POST",{email:n,given_name:t,family_name:e,amount:s}).then(o=>o.billing_requests.id),O=n=>L("/create-billing-request-flow","POST",{billingRequestId:n}).then(t=>t.billing_request_flows.authorisation_url),N=async()=>{try{await fetch(`${I}/ping`)}catch(n){console.error("Error pinging server:",n)}};setInterval(N,6e5);let u="",g="",S=null;window.openModal=E;function T(){window.selectAmount=_,window.continueToDetails=R,window.setPaymentMethod=$,window.handleSubmit=z,window.openModal=E,window.closeModal=p;const n=document.getElementById("payment-modal"),t=document.querySelector(".close");n&&t?(t.addEventListener("click",p),n.addEventListener("click",e=>{e.target===n&&p()})):console.error("Modal or close button element not found."),D()}function D(){const n=document.querySelector(".burger-menu"),t=document.querySelector(".mobile-nav"),e=document.querySelector(".overlay");n&&t&&e&&(n.addEventListener("click",()=>{t.classList.toggle("show"),e.classList.toggle("show")}),e.addEventListener("click",()=>{t.classList.remove("show"),e.classList.remove("show")}),window.addEventListener("resize",()=>{window.innerWidth>760&&(t.classList.remove("show"),e.classList.remove("show"))}))}function _(n){u=n,document.getElementById("custom-amount").value=u,document.querySelectorAll("#amount-selection .btn").forEach(e=>e.classList.toggle("active",e.textContent.includes(`£${n}`)))}function R(){u=document.getElementById("custom-amount").value||u,u?(document.getElementById("amount-selection").classList.add("hidden"),E()):document.getElementById("amount-message").textContent="Please select or enter an amount."}function $(n){g=n,document.querySelectorAll("#paypal, #gocardless").forEach(o=>{o.classList.toggle("active",o.id===n),o.classList.toggle("hidden",o.id!==n)});const e=document.getElementById("donation-form"),s=document.querySelector("#payment-details .title");e&&e.classList.remove("hidden"),s&&s.classList.add("hidden")}async function z(n){var m,f;n.preventDefault();const t=document.getElementById("loader"),e=document.getElementById("email").value,s=document.getElementById("given-name").value,o=document.getElementById("family-name").value,r=document.getElementById("payment-message");if(u=document.getElementById("custom-amount").value||u,t.classList.remove("hidden"),r.textContent="",!s||!e){r.textContent="Please enter both your name and email.",t.classList.add("hidden");return}const l=parseFloat(u);if(isNaN(l)||l<=0){r.textContent="Please enter a valid amount.",t.classList.add("hidden");return}if(!g){r.textContent="Please select a payment method.",t.classList.add("hidden");return}try{if(g==="paypal"){const y=(f=(m=(await C(l.toFixed(2))).links)==null?void 0:m.find(d=>d.rel==="approve"))==null?void 0:f.href;if(y)window.location.href=y;else throw new Error("Approval link not found in PayPal response.")}else if(g==="gocardless"){const i=await A(e,s,o,l),y=await O(i);r.innerHTML=`
        <div>
          <p>Click the link below to complete your donation of £${l}: <br>
          <a href="${y}" target="_blank" rel="noopener noreferrer" style="color: blue;" onclick="closeModal()">Complete Donation</a></p>
        </div>`}}catch(i){console.error("Error:",i.message||i),r.textContent="Error processing donation. Please try again later."}finally{t.classList.add("hidden")}}function h(n){(n.key==="Escape"||n.target.matches(".payment-modal, .payment-modal .close"))&&p()}function E(){const n=document.getElementById("payment-modal"),t=document.getElementById("payment-message");n?(S||(S=n.cloneNode(!0)),t&&(t.textContent=""),n.style.display="block",document.getElementById("payment-details").classList.remove("hidden"),document.addEventListener("keydown",h),window.addEventListener("click",h)):console.error("Modal element not found.")}async function p(){const n=document.getElementById("payment-modal");if(n){n.style.display="none",document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",h),window.removeEventListener("click",h),document.querySelectorAll("#paypal, #gocardless").forEach(l=>{l.classList.remove("hidden","active")});const e=document.getElementById("donation-form");e&&(e.reset(),e.classList.add("hidden"));const s=document.querySelector("#payment-details .title");s&&s.classList.remove("hidden");const o=document.getElementById("amount-selection");o&&o.classList.remove("hidden");const r=document.getElementById("payment-message");r&&(r.textContent=""),document.getElementById("custom-amount").value="",document.querySelectorAll(".btn").forEach(l=>{l.classList.remove("active")})}else console.error("Modal element not found.")}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".about-text"),t=document.querySelector(".read-more"),e=document.createElement("a");e.href="#",e.className="read-less",e.textContent="Read Less",e.style.display="none",t.parentNode.insertBefore(e,t.nextSibling),t.addEventListener("click",s=>{s.preventDefault(),n.style.maxHeight="none",n.style.display="block",t.style.display="none",e.style.display="inline"}),e.addEventListener("click",s=>{s.preventDefault(),n.style.maxHeight="100px",t.style.display="inline",e.style.display="none"})});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".count");function t(s,o){let r=0;const c=400,l=s.closest(".raised-info-each").querySelector("span").textContent.startsWith("£"),m=setInterval(()=>{r+=Math.ceil(o/c),r>=o&&(r=o,clearInterval(m)),s.textContent=l?`£ ${r.toLocaleString()}`:r.toLocaleString()},1)}function e(){const s=window.innerHeight+window.scrollY;n.forEach(o=>{if(o.getBoundingClientRect().top<s&&!o.classList.contains("animated")){const c=parseInt(o.parentElement.getAttribute("data-target"));t(o,c),o.classList.add("animated")}})}window.addEventListener("scroll",e),e()});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".slides"),t=n.querySelectorAll("img");let e=0;const s=3,o=1e3;let r;function c(){const a=100/s*e;n.style.transform=`translateY(-${a}%)`}function l(){e=e===0?t.length-s:e-1,c(),y()}function m(){e=e>=t.length-s?0:e+1,c(),y()}function f(){r=setInterval(m,o)}function i(){clearInterval(r)}function y(){i(),f()}f(),n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",f);const d=document.getElementById("lightbox"),v=document.querySelector(".lightbox-content img"),x=document.querySelector(".lightbox .close"),B=document.querySelector(".lightbox-prev"),k=document.querySelector(".lightbox-next");function q(a){e=a,d.style.display="block",v.src=t[e].src}function w(){e=e===t.length-1?0:e+1,v.src=t[e].src}function b(){e=e===0?t.length-1:e-1,v.src=t[e].src}t.forEach((a,M)=>{a.addEventListener("click",()=>q(M))}),x.addEventListener("click",()=>{d.style.display="none"}),B.addEventListener("click",b),k.addEventListener("click",w),window.addEventListener("click",a=>{a.target===d&&(d.style.display="none")}),document.addEventListener("keydown",a=>{d.style.display==="block"?(a.key==="ArrowRight"&&w(),a.key==="ArrowLeft"&&b(),a.key==="Escape"&&(d.style.display="none")):(a.key==="ArrowLeft"&&l(),a.key==="ArrowRight"&&m())})});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll("img.lazy");if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(s=>{if(s.isIntersecting){const o=s.target;o.src=o.dataset.src,o.classList.remove("lazy"),t.unobserve(o)}})});n.forEach(e=>t.observe(e))}else n.forEach(t=>{t.src=t.dataset.src,t.classList.remove("lazy")})});document.addEventListener("DOMContentLoaded",T);
//# sourceMappingURL=main-bb82e773.js.map

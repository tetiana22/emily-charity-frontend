(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(t){if(t.ep)return;t.ep=!0;const l=o(t);fetch(t.href,l)}})();const A="https://emily-charity.onrender.com",O="Bearer sandbox_QbpEJylc3XRJ4iE8qe1axWfIGQ4k_H_bxfs3lkQt",S=async(n,e,o)=>{try{const s=await fetch(`${A}${n}`,{method:e,headers:{"Content-Type":"application/json",Authorization:O},body:o?JSON.stringify(o):void 0});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error(`Error with ${n}:`,s),s}},N=n=>S("/create-paypal-order","POST",{amount:n}),T=(n,e,o,s)=>S("/create-billing-request","POST",{email:n,given_name:e,family_name:o,amount:s}).then(t=>t.billing_requests.id),D=n=>S("/create-billing-request-flow","POST",{billingRequestId:n}).then(e=>e.billing_request_flows.authorisation_url);let u="",g="",M=null;window.openModal=I;function _(){window.selectAmount=$,window.continueToDetails=z,window.setPaymentMethod=H,window.handleSubmit=F,window.openModal=I,window.closeModal=p;const n=document.getElementById("payment-modal"),e=document.querySelector(".close");n&&e?(e.addEventListener("click",p),n.addEventListener("click",o=>{o.target===n&&p()})):console.error("Modal or close button element not found."),R()}function R(){const n=document.querySelector(".burger-menu"),e=document.querySelector(".mobile-nav"),o=document.querySelector(".overlay");n&&e&&o&&(n.addEventListener("click",()=>{e.classList.toggle("show"),o.classList.toggle("show")}),o.addEventListener("click",()=>{e.classList.remove("show"),o.classList.remove("show")}),window.addEventListener("resize",()=>{window.innerWidth>760&&(e.classList.remove("show"),o.classList.remove("show"))}))}function $(n){u=n,document.getElementById("custom-amount").value=u,document.querySelectorAll("#amount-selection .btn").forEach(o=>o.classList.toggle("active",o.textContent.includes(`£${n}`)))}function z(){u=document.getElementById("custom-amount").value||u,u?(document.getElementById("amount-selection").classList.add("hidden"),I()):document.getElementById("amount-message").textContent="Please select or enter an amount."}function H(n){g=n,document.querySelectorAll("#paypal, #gocardless").forEach(t=>{t.classList.toggle("active",t.id===n),t.classList.toggle("hidden",t.id!==n)});const o=document.getElementById("donation-form"),s=document.querySelector("#payment-details .title");o&&o.classList.remove("hidden"),s&&s.classList.add("hidden")}async function F(n){var m,i;n.preventDefault();const e=document.getElementById("email").value,o=document.getElementById("given-name").value,s=document.getElementById("family-name").value,t=document.getElementById("payment-message");if(u=document.getElementById("custom-amount").value||u,!o||!e){t.textContent="Please enter both your name and email.";return}const r=parseFloat(u);if(isNaN(r)||r<=0){t.textContent="Please enter a valid amount.";return}if(!g){t.textContent="Please select a payment method.";return}try{if(g==="paypal"){const a=(i=(m=(await N(r.toFixed(2))).links)==null?void 0:m.find(y=>y.rel==="approve"))==null?void 0:i.href;if(a)window.location.href=a;else throw new Error("Approval link not found in PayPal response.")}else if(g==="gocardless"){const d=await T(e,o,s,r),a=await D(d);t.innerHTML=`
        <div>
          <p>Click the link below to complete your donation of £${r}: <br>
          <a href="${a}" target="_blank" rel="noopener noreferrer" style="color: blue;" onclick="closeModal()">Complete Donation</a></p>
        </div>`}}catch(d){console.error("Error:",d.message||d),t.textContent="Error processing donation. Please try again later."}}function h(n){(n.key==="Escape"||n.target.matches(".payment-modal, .payment-modal .close"))&&p()}function I(){const n=document.getElementById("payment-modal"),e=document.getElementById("payment-message");n?(M||(M=n.cloneNode(!0)),e&&(e.textContent=""),n.style.display="block",document.getElementById("payment-details").classList.remove("hidden"),document.addEventListener("keydown",h),window.addEventListener("click",h)):console.error("Modal element not found.")}async function p(){const n=document.getElementById("payment-modal");if(n){n.style.display="none",document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",h),window.removeEventListener("click",h),document.querySelectorAll("#paypal, #gocardless").forEach(r=>{r.classList.remove("hidden","active")});const o=document.getElementById("donation-form");o&&(o.reset(),o.classList.add("hidden"));const s=document.querySelector("#payment-details .title");s&&s.classList.remove("hidden");const t=document.getElementById("amount-selection");t&&t.classList.remove("hidden");const l=document.getElementById("payment-message");l&&(l.textContent=""),document.getElementById("custom-amount").value=""}else console.error("Modal element not found.")}document.querySelectorAll(".about-img img").forEach(n=>{n.addEventListener("click",function(){const e=document.createElement("img");e.src=this.src,e.classList.add("fullscreen-img"),document.body.appendChild(e),e.addEventListener("click",function(){document.body.removeChild(e)})})});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".about-text"),e=document.querySelector(".read-more"),o=document.createElement("a");o.href="#",o.className="read-less",o.textContent="Read Less",o.style.display="none",e.parentNode.insertBefore(o,e.nextSibling),e.addEventListener("click",s=>{s.preventDefault(),n.style.maxHeight="none",n.style.display="block",e.style.display="none",o.style.display="inline"}),o.addEventListener("click",s=>{s.preventDefault(),n.style.maxHeight="100px",e.style.display="inline",o.style.display="none"})});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".count");function e(s,t){let l=0;const r=400,m=s.closest(".raised-info-each").querySelector("span").textContent.startsWith("£"),i=setInterval(()=>{l+=Math.ceil(t/r),l>=t&&(l=t,clearInterval(i)),s.textContent=m?`£ ${l.toLocaleString()}`:l.toLocaleString()},1)}function o(){const s=window.innerHeight+window.scrollY;n.forEach(t=>{if(t.getBoundingClientRect().top<s&&!t.classList.contains("animated")){const r=parseInt(t.parentElement.getAttribute("data-target"));e(t,r),t.classList.add("animated")}})}window.addEventListener("scroll",o),o()});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".slides"),e=n.querySelectorAll("img"),o=document.querySelector(".prev"),s=document.querySelector(".next"),t=document.getElementById("lightbox"),l=document.querySelector(".lightbox-content"),r=document.querySelector(".lightbox .close"),m=document.querySelector(".indicators");let i=0,d;const a=document.createElement("div"),y=document.createElement("div");a.classList.add("lightbox-prev"),y.classList.add("lightbox-next"),a.innerHTML="&#10094;",y.innerHTML="&#10095;",t.appendChild(a),t.appendChild(y),e.forEach((c,w)=>{const b=document.createElement("span");b.classList.add("dot"),b.addEventListener("click",()=>C(w)),m.appendChild(b)});const x=m.querySelectorAll(".dot");function v(){n.style.transform=`translateX(-${i*100}%)`,x.forEach(c=>c.classList.toggle("active",c.classList.contains("dot")&&c===x[i]))}function L(){i=i===0?e.length-1:i-1,v(),E()}function f(){i=i===e.length-1?0:i+1,v(),E()}function C(c){i=c,v(),E()}function P(c){i=c,t.style.display="block",l.src=e[i].src}function k(){i=i===e.length-1?0:i+1,l.src=e[i].src}function B(){i=i===0?e.length-1:i-1,l.src=e[i].src}function q(){d=setInterval(f,3e3)}function E(){clearInterval(d),q()}o.addEventListener("touchstart",L),s.addEventListener("touchstart",f),o.addEventListener("click",L),s.addEventListener("click",f),a.addEventListener("click",B),y.addEventListener("click",k),r.addEventListener("click",()=>{t.style.display="none"}),window.addEventListener("click",c=>{c.target===t&&(t.style.display="none")}),document.addEventListener("keydown",c=>{t.style.display==="block"?(c.key==="ArrowRight"&&k(),c.key==="ArrowLeft"&&B(),c.key==="Escape"&&(t.style.display="none")):(c.key==="ArrowLeft"&&L(),c.key==="ArrowRight"&&f())}),e.forEach((c,w)=>{c.addEventListener("click",()=>P(w))}),q()});document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll("img.lazy");if("IntersectionObserver"in window){const e=new IntersectionObserver(o=>{o.forEach(s=>{if(s.isIntersecting){const t=s.target;t.src=t.dataset.src,t.classList.remove("lazy"),e.unobserve(t)}})});n.forEach(o=>e.observe(o))}else n.forEach(e=>{e.src=e.dataset.src,e.classList.remove("lazy")})});console.log("initializeDonationPage called");console.log("openModal function:",window.openModal);document.addEventListener("DOMContentLoaded",_);
//# sourceMappingURL=main-0e9d782e.js.map

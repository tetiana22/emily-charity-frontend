(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();const M="https://emily-charity.onrender.com",O="Bearer sandbox_QbpEJylc3XRJ4iE8qe1axWfIGQ4k_H_bxfs3lkQt",I=async(t,e,o)=>{try{const s=await fetch(`${M}${t}`,{method:e,headers:{"Content-Type":"application/json",Authorization:O},body:o?JSON.stringify(o):void 0});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error(`Error with ${t}:`,s),s}},N=t=>I("/create-paypal-order","POST",{amount:t}),T=(t,e,o,s)=>I("/create-billing-request","POST",{email:t,given_name:e,family_name:o,amount:s}).then(n=>n.billing_requests.id),D=t=>I("/create-billing-request-flow","POST",{billingRequestId:t}).then(e=>e.billing_request_flows.authorisation_url),_=async()=>{try{await fetch(`${M}/ping`)}catch(t){console.error("Error pinging server:",t)}};setInterval(_,6e5);let u="",p="",C=null;window.openModal=x;function R(){window.selectAmount=H,window.continueToDetails=z,window.setPaymentMethod=F,window.handleSubmit=G,window.openModal=x,window.closeModal=h;const t=document.getElementById("payment-modal"),e=document.querySelector(".close");t&&e?(e.addEventListener("click",h),t.addEventListener("click",o=>{o.target===t&&h()})):console.error("Modal or close button element not found."),$()}function $(){const t=document.querySelector(".burger-menu"),e=document.querySelector(".mobile-nav"),o=document.querySelector(".overlay");t&&e&&o&&(t.addEventListener("click",()=>{e.classList.toggle("show"),o.classList.toggle("show")}),o.addEventListener("click",()=>{e.classList.remove("show"),o.classList.remove("show")}),window.addEventListener("resize",()=>{window.innerWidth>760&&(e.classList.remove("show"),o.classList.remove("show"))}))}function H(t){u=t,document.getElementById("custom-amount").value=u,document.querySelectorAll("#amount-selection .btn").forEach(o=>o.classList.toggle("active",o.textContent.includes(`£${t}`)))}function z(){u=document.getElementById("custom-amount").value||u,u?(document.getElementById("amount-selection").classList.add("hidden"),x()):document.getElementById("amount-message").textContent="Please select or enter an amount."}function F(t){p=t,document.querySelectorAll("#paypal, #gocardless").forEach(n=>{n.classList.toggle("active",n.id===t),n.classList.toggle("hidden",n.id!==t)});const o=document.getElementById("donation-form"),s=document.querySelector("#payment-details .title");o&&o.classList.remove("hidden"),s&&s.classList.add("hidden")}async function G(t){var i,y;t.preventDefault();const e=document.getElementById("loader"),o=document.getElementById("email").value,s=document.getElementById("given-name").value,n=document.getElementById("family-name").value,l=document.getElementById("payment-message");if(u=document.getElementById("custom-amount").value||u,e.classList.remove("hidden"),l.textContent="",!s||!o){l.textContent="Please enter both your name and email.",e.classList.add("hidden");return}const a=parseFloat(u);if(isNaN(a)||a<=0){l.textContent="Please enter a valid amount.",e.classList.add("hidden");return}if(!p){l.textContent="Please select a payment method.",e.classList.add("hidden");return}try{if(p==="paypal"){const m=(y=(i=(await N(a.toFixed(2))).links)==null?void 0:i.find(f=>f.rel==="approve"))==null?void 0:y.href;if(m)window.location.href=m;else throw new Error("Approval link not found in PayPal response.")}else if(p==="gocardless"){const d=await T(o,s,n,a),m=await D(d);l.innerHTML=`
        <div>
          <p>Click the link below to complete your donation of £${a}: <br>
          <a href="${m}" target="_blank" rel="noopener noreferrer" style="color: blue;" onclick="closeModal()">Complete Donation</a></p>
        </div>`}}catch(d){console.error("Error:",d.message||d),l.textContent="Error processing donation. Please try again later."}finally{e.classList.add("hidden")}}function v(t){(t.key==="Escape"||t.target.matches(".payment-modal, .payment-modal .close"))&&h()}function x(){const t=document.getElementById("payment-modal"),e=document.getElementById("payment-message");t?(C||(C=t.cloneNode(!0)),e&&(e.textContent=""),t.style.display="block",document.getElementById("payment-details").classList.remove("hidden"),document.addEventListener("keydown",v),window.addEventListener("click",v)):console.error("Modal element not found.")}async function h(){const t=document.getElementById("payment-modal");if(t){t.style.display="none",document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",v),window.removeEventListener("click",v),document.querySelectorAll("#paypal, #gocardless").forEach(r=>{r.classList.remove("hidden","active")});const o=document.getElementById("donation-form");o&&(o.reset(),o.classList.add("hidden"));const s=document.querySelector("#payment-details .title");s&&s.classList.remove("hidden");const n=document.getElementById("amount-selection");n&&n.classList.remove("hidden");const l=document.getElementById("payment-message");l&&(l.textContent=""),document.getElementById("custom-amount").value=""}else console.error("Modal element not found.")}document.querySelectorAll(".about-img img").forEach(t=>{t.addEventListener("click",function(){const e=document.createElement("img");e.src=this.src,e.classList.add("fullscreen-img"),document.body.appendChild(e),e.addEventListener("click",function(){document.body.removeChild(e)})})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".about-text"),e=document.querySelector(".read-more"),o=document.createElement("a");o.href="#",o.className="read-less",o.textContent="Read Less",o.style.display="none",e.parentNode.insertBefore(o,e.nextSibling),e.addEventListener("click",s=>{s.preventDefault(),t.style.maxHeight="none",t.style.display="block",e.style.display="none",o.style.display="inline"}),o.addEventListener("click",s=>{s.preventDefault(),t.style.maxHeight="100px",e.style.display="inline",o.style.display="none"})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".count");function e(s,n){let l=0;const r=400,a=s.closest(".raised-info-each").querySelector("span").textContent.startsWith("£"),i=setInterval(()=>{l+=Math.ceil(n/r),l>=n&&(l=n,clearInterval(i)),s.textContent=a?`£ ${l.toLocaleString()}`:l.toLocaleString()},1)}function o(){const s=window.innerHeight+window.scrollY;t.forEach(n=>{if(n.getBoundingClientRect().top<s&&!n.classList.contains("animated")){const r=parseInt(n.parentElement.getAttribute("data-target"));e(n,r),n.classList.add("animated")}})}window.addEventListener("scroll",o),o()});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".slides"),e=t.querySelectorAll("img"),o=document.querySelector(".prev"),s=document.querySelector(".next"),n=document.getElementById("lightbox"),l=document.querySelector(".lightbox-content"),r=document.querySelector(".lightbox .close"),a=document.querySelector(".indicators");let i=0,y;const d=document.createElement("div"),m=document.createElement("div");d.classList.add("lightbox-prev"),m.classList.add("lightbox-next"),d.innerHTML="&#10094;",m.innerHTML="&#10095;",n.appendChild(d),n.appendChild(m),e.forEach((c,b)=>{const S=document.createElement("span");S.classList.add("dot"),S.addEventListener("click",()=>P(b)),a.appendChild(S)});const f=a.querySelectorAll(".dot");function L(){t.style.transform=`translateX(-${i*100}%)`,f.forEach(c=>c.classList.toggle("active",c.classList.contains("dot")&&c===f[i]))}function E(){i=i===0?e.length-1:i-1,L(),w()}function g(){i=i===e.length-1?0:i+1,L(),w()}function P(c){i=c,L(),w()}function A(c){i=c,n.style.display="block",l.src=e[i].src}function k(){i=i===e.length-1?0:i+1,l.src=e[i].src}function B(){i=i===0?e.length-1:i-1,l.src=e[i].src}function q(){y=setInterval(g,3e3)}function w(){clearInterval(y),q()}o.addEventListener("touchstart",E),s.addEventListener("touchstart",g),o.addEventListener("click",E),s.addEventListener("click",g),d.addEventListener("click",B),m.addEventListener("click",k),r.addEventListener("click",()=>{n.style.display="none"}),window.addEventListener("click",c=>{c.target===n&&(n.style.display="none")}),document.addEventListener("keydown",c=>{n.style.display==="block"?(c.key==="ArrowRight"&&k(),c.key==="ArrowLeft"&&B(),c.key==="Escape"&&(n.style.display="none")):(c.key==="ArrowLeft"&&E(),c.key==="ArrowRight"&&g())}),e.forEach((c,b)=>{c.addEventListener("click",()=>A(b))}),q()});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll("img.lazy");if("IntersectionObserver"in window){const e=new IntersectionObserver(o=>{o.forEach(s=>{if(s.isIntersecting){const n=s.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}})});t.forEach(o=>e.observe(o))}else t.forEach(e=>{e.src=e.dataset.src,e.classList.remove("lazy")})});document.addEventListener("DOMContentLoaded",R);
//# sourceMappingURL=main-0b27d676.js.map
